<script>
    let cart = JSON.parse(localStorage.getItem('cart')) || {};
    let prices = { beef: 6, regular: 6, 'one-scoop': 3, 'two-scoops': 5 };
    
    // Display cart items in the checkout page
    function displayCart() {
        let cartContainer = document.getElementById('cart-items');
        cartContainer.innerHTML = '';
        let total = 0;
        
        // Loop through cart and display each item
        for (let item in cart) {
            if (cart[item] > 0) {
                let price = prices[item] * cart[item];
                total += price;
                cartContainer.innerHTML += `<p>${item.replace('-', ' ')}: ${cart[item]} - $${price}</p>`;
            }
        }
        document.getElementById('total-price').innerText = total.toFixed(2);
    }
    
    // Go to the confirm page and save name and dorm info to localStorage
    function goToConfirm() {
        const name = document.getElementById('name').value;
        const dorm = document.getElementById('dorm').value;

        if (name && dorm) {
            const userInfo = { name, dorm };
            
            // Collect the cart items and total price
            let cartDetails = [];
            for (let item in cart) {
                if (cart[item] > 0) {
                    cartDetails.push({
                        item: item.replace('-', ' '),
                        quantity: cart[item],
                        price: prices[item],
                        total: prices[item] * cart[item]
                    });
                }
            }

            // Save user and cart data to localStorage and go to confirm page
            localStorage.setItem('order', JSON.stringify({ userInfo, cartDetails }));
            window.location.href = 'confirm.html';
        } else {
            alert("Please fill out both your name and dorm.");
        }
    }

    // Go back to the shopping page
    function goBack() {
        window.location.href = 'index.html';
    }
    
    displayCart(); // Display the cart items when the page loads
</script>
